
 자바 7이 등장하기 전에는 데이터 컬렉션을 병렬로 처리하기가 어려웠다.
 데이터를 서브파트로 분할하고 분한될 서브파트를 각각 스레드로 할당한다.
 스레드는 할당한 다음에는 의도치 않은 레이스 컨디션이 발생하지 않도록 적절한 동기화를 추가해야하고, 마지막으로 부분 결과를 합쳐야된다.
 자바 7은 더 쉽게 병렬화를 수행하면서 에러를 최소화할 수 있도록 <b>포크/조인 프레임워크</b> 기능을 제공한다.
 
 이번 chapter에서는 스트림으로 데이터 컬렉션 관련 동작이 얼마나 쉽게 실행가능한지를 보여준다.
 스트림을 이용하면 순차 스트림을 병렬 스트림으로 자연스럽게 바꿀 수 있다.
 병렬 스트림이 내부적으로 어떻게 처리되는지 알아야 스트림을 잘못 사용하는 상황을 피할 수 있다.
 
 7.1 병렬 스트림
 스트림 인터페이스를 이용하면 아주 간단하게 요소를 병렬로 처리할 수 있다.
 컬렉션에서 parallelStream을 호출하면 병렬 스트림이 생성된다.
 병렬 스트림이란 각각의 스레드에서 처리할 수 이도록 스트림 요소를 여러 청크로 분할한 스트림이다.
 따라서 병렬 스트림을 이용하면 모든 멀티 코더 프로세서가 각각의 청크를 처리하도록 할당한다.
 
 ex) 숫자 n을 인수로 받아 1~n 까지의 모든 숫자의 합계를 반환하는 메서드를 구현한다고 가정하자.
 숫자로 이루어진 무한 스트림을 만든 다음에 인수로 주어진 크기로 스트림을 제한하고 두 숫자를 BinaryOperator로 리듀싱 작업을 수행할 수 있다.
 public long sequentialSum(long n){
  return Stream.iterate(1L, i -> i+1) <- 무한 자연수 스트림 생성
               .limit(n) <- n 개 이하로 제한
               .reduce(0L, Long::sum); <- 모든 숫자를 더하는 스트림 리듀싱 연산
 }
 
 vs 전통적인 자바에서는 다음과 같이 사용
 public long iterativeSum(long n){
  long result = 0;
  for(long l = 1L; i<= n; i++) result += i;
  return result;
 }
 
 특히 n값이 커지게 되면 이 연산으로 병렬 처리하는 거시 좋을 것이다.
 
 
 7.1.1 순차 스트림을 병렬 스트림으로 변환하기
 
 순차 스트림에 parallel 메서드를 호출하면 기존의 함수형 리듀싱 연산(숫자 합계 계산)이 병렬로 처리된다.
 
 public long parallelSum(long n){
  return Stream.iterate(1L, i -> i+1) <- 무한 자연수 스트림 생성
               .limit(n) <- n 개 이하로 제한
               .parallel() <- <b>스트림을 병렬 스트림으로 변환</b>
               .reduce(0L, Long::sum); <- 모든 숫자를 더하는 스트림 리듀싱 연산
 }
 
 reduce연산으로 스트림의 모든 숫자를 더하고, 이전 코드와 다르게 여러 청크로 스트림이 분할되어 있다.
 따라서 리듀싱 연산을 여러 청크에 병렬로 수행할 수 있다.
 마지막으로 리듀싱 연산으로 생성된 부분 결과를 다시 리듀싱 연산으로 합쳐서 전체 스트림의 리듀싱 결과를 도출한다.
 
